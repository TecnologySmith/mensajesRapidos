<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Soporte Lizto Software</title>
    <link rel="icon" type="image/png" href="https://i.ibb.co/M5QnCZR1/images.jpg">

    <style>
        /* === ESTILOS GENERALES === */
        body {
            margin: 0;
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: #121212; /* Fondo oscuro */
            color: #f1f1f1;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* === ENCABEZADO === */
        header {
            text-align: center;
            padding: 20px;
            background-color: #1c1c1c;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
        }

        header h1 {
            color: #00c3ff;
            margin: 0;
            text-shadow: 0 0 8px rgba(0, 195, 255, 0.4);
        }

        /* === CONTENEDOR PRINCIPAL - DIVIDE EN 2 COLUMNAS === */
        .main-container {
            display: flex;
            flex: 1;
            padding: 20px;
            gap: 20px;
        }

        .main-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 15px;
            background-color: #1e1e1e;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }

        /* Ajuste de columnas */
        .mensajes-rapidos {
            flex: 1.5;
        }
        .agendamientos {
            flex: 1;
        }

        /* === TÍTULOS DE SECCIÓN === */
        .section-title {
            color: #00c3ff;
            border-bottom: 2px solid #00c3ff;
            padding-bottom: 5px;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        /* === BOTONES GENERALES === */
        .top-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 10px;
            border-radius: 10px;
        }
        
        /* Contenedor para los botones de Saludo/Modificadores */
        .modifier-buttons-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .msg-btn, .agent-btn, .modifier-btn {
            padding: 10px 14px;
            background-color: #2a2a2a;
            border: 1px solid #3a3a3a;
            color: #f1f1f1;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            /* Flex-grow para los botones de agente */
            flex-grow: 0;
        }
        
        /* Estilo para los botones Modificadores (Hola, Dame Momento, ¿Cómo puedo ayudar?) */
        .modifier-btn {
            font-size: 1.1em;
            padding: 10px 15px;
            background-color: #00c3ff; /* Color diferente para destacar */
            color: #121212;
            border-color: #00a8e1;
            font-weight: bold;
        }

        .msg-btn:hover:not(.active), .agent-btn:hover:not(.active), .modifier-btn:hover:not(.active) {
            background-color: #00c3ff;
            color: #121212;
            transform: translateY(-2px);
        }

        /* Estilo activo para agente, botón de hora y los botones modificadores */
        .agent-btn.active, .time-btn.active, .modifier-btn.active {
            background-color: #00c3ff;
            color: #121212;
            border-color: #00a8e1;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 195, 255, 0.3);
        }

        /* Asegurar que los botones modificadores estén en una sola fila en escritorio */
        @media (min-width: 768px) {
            .modifier-buttons-container {
                justify-content: space-evenly;
            }
            .modifier-btn {
                flex-grow: 0;
            }
        }
        
        /* Resto de estilos sin cambios (inputs, textarea, etc.) */
        .input-box, .agent-input-box {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        #userInput, #clienteData, #agendamientoOutput {
            width: 100%;
            padding: 10px;
            border: 1px solid #00c3ff;
            border-radius: 8px;
            background-color: #1e1e1e;
            color: #f1f1f1;
            outline: none;
            box-sizing: border-box;
        }

        #userInput:focus, #clienteData:focus {
            box-shadow: 0 0 8px rgba(0, 195, 255, 0.6);
        }

        .message-area {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            flex-grow: 1;
        }

        #messageBox {
            width: 100%;
            height: 300px;
            background-color: #1c1c1c;
            border: 1px solid #333;
            border-radius: 10px;
            padding: 15px;
            color: #eaeaea;
            resize: none;
            font-size: 15px;
            line-height: 1.5;
            outline: none;
            flex-grow: 1;
        }

        .agendamiento-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .agent-times {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            min-height: 45px;
        }

        #copyBtn, #copyAgentBtn {
            padding: 10px 20px;
            background-color: #00c3ff;
            color: #121212;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s;
            height: 45px;
            align-self: center;
        }

        #copyAgentBtn {
            width: 100%;
            margin-top: 10px;
        }

        #copyBtn:hover, #copyAgentBtn:hover {
            background-color: #00a8e1;
        }
        
        #agendamientoOutput {
            height: 150px;
            margin-top: 10px;
        }

        #copy-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #4CAF50; /* Verde */
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background: #00c3ff;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-track {
            background: #1e1e1e;
        }

        @media (max-width: 992px) {
            .main-container {
                flex-direction: column;
            }
            .mensajes-rapidos, .agendamientos {
                flex: 1;
            }
        }
        @media (max-width: 768px) {
            .message-area {
                flex-direction: column;
            }
            #copyBtn {
                width: 100%;
            }
        }
    </style>
</head>
<body>

    <div id="copy-notification">Copiado ✅</div>

    <header>
        <h1>Soporte y Atención al Cliente Lizto Software</h1>
    </header>

    <div class="main-container">

        <div class="main-column mensajes-rapidos">
            <div class="section-title">Mensajes de Soporte</div>
            
            <div class="modifier-buttons-container">
                <button id="holaBtn" class="modifier-btn" onclick="toggleHola()">Hola (Inicio)</button>
                <button id="dameMomentoBtn" class="modifier-btn" onclick="toggleDameMomento()">Dame un momento</button>
                <button id="comoAyudarBtn" class="modifier-btn" onclick="toggleComoAyudar()">¿Cómo puedo ayudar?</button>
            </div>

            <div class="top-buttons">
                <button class="msg-btn" onclick="mostrarMensaje('repcontingencia')">Caso asignado</button>
                <button class="msg-btn" onclick="mostrarMensaje('daysMessage')">Saludo Días</button>
                <button class="msg-btn" onclick="mostrarMensaje('afternoonMessage')">Saludo Tardes</button>
                <button class="msg-btn" onclick="mostrarMensaje('pagoRealizadoMessage')">Confirmación de Pago</button>
                <button class="msg-btn" onclick="mostrarMensaje('pagoGraciasMessage')">Agradecimiento Pago</button>
                <button class="msg-btn" onclick="mostrarMensaje('solicitarLinkMessage')">Solicitud Soporte Pago</button>
                <button class="msg-btn" onclick="mostrarMensaje('despedidaMessage')">Despedida</button>
                <button class="msg-btn" onclick="mostrarMensaje('linkReunionMessage')">Enlace Reunión</button>
                <button class="msg-btn" onclick="mostrarMensaje('sinRespuesta')">Sin Respuesta</button>
                <button class="msg-btn" onclick="mostrarMensaje('linkPago')">Link de Pago</button>
                <button class="msg-btn" onclick="mostrarMensaje('pasoaPaso')">Paso a Paso</button>
                <button class="msg-btn" onclick="mostrarMensaje('dameunMomento')">Dame un Momento</button>
                <button class="msg-btn" onclick="mostrarMensaje('algoMas')">¿Algo Más?</button>
            </div>

            <div class="input-box">
                <label for="userInput">Nombre del Cliente (Para Saludo)</label>
                <input type="text" id="userInput" placeholder="Ej: Juan Pérez" oninput="actualizarMensajeActual()" />
            </div>

            <div class="message-area">
                <textarea id="messageBox" readonly placeholder="Selecciona un mensaje arriba..."></textarea>
                <button id="copyBtn" onclick="copiarTexto('messageBox')">Copiar</button>
            </div>
        </div>

        <div class="main-column agendamientos">
            <div class="section-title">Agendamientos y Enlaces</div>

            <div class="agent-input-box">
                <label for="clienteData">Datos del Cliente (Nombre, Teléfono)</label>
                <input type="text" id="clienteData" placeholder="Ej: Lola, 3108765646" oninput="actualizarAgendamiento()" />
            </div>

            <div class="agendamiento-buttons">
                <button class="agent-btn" id="btnYeison" onclick="seleccionarAgente('yeison')">Yeison</button>
                <button class="agent-btn" id="btnPaola" onclick="seleccionarAgente('paola')">Paola</button>
            </div>
            
            <div class="agent-times" id="agentTimes">
                </div>

            <textarea id="agendamientoOutput" readonly placeholder="El mensaje de agendamiento aparecerá aquí..."></textarea>
            
            <button id="copyAgentBtn" onclick="copiarTexto('agendamientoOutput')">Copiar Agendamiento</button>

        </div>
    </div>

    <script>
        /* =======================================================
         * SECCIÓN DE MENSAJES RÁPIDOS
         * ======================================================= */
        const mensajes = {
            repcontingencia: "¿cómo estás? Hablas con Yeison del equipo de soporte de Lizto, me asignaron tu caso para poderte ayudar",
            daysMessage: "buenos días, ¿cómo estás? Hablas con Yeison del equipo de soporte de Lizto. ",
            afternoonMessage: "buenas tardes, ¿cómo estás? Hablas con Yeison del equipo de soporte de Lizto. ",
            pagoRealizadoMessage: "¿cómo estás? Hablas con Yeison del equipo de soporte de Lizto. Mil gracias por el pago. Ya puedes ingresar.",
            pagoGraciasMessage: "con mucho gusto, indícame el NIT del salón para solicitarlo al área contable.",
            solicitarLinkMessage: "¿cómo estás? Hablas con Yeison del equipo de soporte de Lizto. Mil disculpas, el sistema entró en suspensión automática al no detectar el pago. ¿Me puedes enviar el soporte de pago y el NIT para verificarlo con contabilidad?",
            despedidaMessage: "ha sido un gusto ayudarte. Si necesitas más ayuda, no dudes en contactarnos. ¡Te deseo un excelente día!",
            linkReunionMessage: "al correo te acabamos de enviar el link de la reunión. ¿Me confirmas por favor si te llegó?",
            sinRespuesta: "Esperamos que la solución brindada haya resuelto tu caso. Cuando tengas un momento, ¿podrías confirmarnos si todo está en orden? Al no tener respuesta, procederemos a cerrar el ticket, pero si tienes otra consulta estaremos atentos para ayudarte.",
            linkPago: "puedes realizar el pago en este link:",
            pasoaPaso: "En este paso a paso te mostramos cómo puedes hacerlo. Si tienes alguna duda, me comentas por favor.",
            dameunMomento: "dame un momento por favor, vamos a verificar.",
            algoMas: "con mucho gusto, ¿hay algo más en lo que te podamos colaborar?"
        };

        let mensajeActual = ""; // Guarda el ID del mensaje seleccionado
        let incluirHola = false; // Estado para el botón "Hola"
        let incluirDameMomento = false; // Nuevo estado para "Dame un momento por favor"
        let incluirComoAyudar = false; // Nuevo estado para "¿Cómo puedo ayudarte?"

        // Muestra el mensaje seleccionado
        function mostrarMensaje(id) {
            mensajeActual = id;
            // Opción: Si el mensaje no requiere "Hola", desactivar el botón.
            if (id === 'sinRespuesta') {
                incluirHola = false;
                document.getElementById('holaBtn').classList.remove('active');
            }
            actualizarMensajeActual();
        }
        
        // Función para alternar el estado del botón "Hola"
        function toggleHola() {
            incluirHola = !incluirHola; 
            const holaBtn = document.getElementById('holaBtn');
            
            if (incluirHola) {
                holaBtn.classList.add('active');
            } else {
                holaBtn.classList.remove('active');
            }
            
            if (mensajeActual) {
                actualizarMensajeActual();
            }
        }

        // NUEVA FUNCIÓN: Alterna el estado del botón "Dame un momento por favor"
        function toggleDameMomento() {
            incluirDameMomento = !incluirDameMomento;
            const btn = document.getElementById('dameMomentoBtn');
            
            if (incluirDameMomento) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
            
            if (mensajeActual) {
                actualizarMensajeActual();
            }
        }

        // NUEVA FUNCIÓN: Alterna el estado del botón "¿Cómo puedo ayudarte?"
        function toggleComoAyudar() {
            incluirComoAyudar = !incluirComoAyudar;
            const btn = document.getElementById('comoAyudarBtn');
            
            if (incluirComoAyudar) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
            
            if (mensajeActual) {
                actualizarMensajeActual();
            }
        }


        /**
         * Inserta el nombre del cliente y los modificadores (Hola, Dame un momento, ¿Cómo puedo ayudarte?) 
         * al mensaje base.
         */
        function personalizarMensaje(mensaje) {
            const nombre = document.getElementById("userInput").value.trim();
            
            // 1. Capitaliza la primera letra del mensaje base.
            let mensajeFinal = mensaje.charAt(0).toUpperCase() + mensaje.slice(1);
            
            const esMensajeExcluidoDeHola = mensaje.startsWith("Esperamos"); // Solo sinRespuesta
            
            // 2. Si hay nombre, lo antepone.
            if (nombre) {
                mensajeFinal = `${nombre}, ${mensajeFinal}`;
            }
            
            // 3. Si el botón "Hola" está activo Y el mensaje no está excluido, añade "Hola" al inicio.
            if (incluirHola && !esMensajeExcluidoDeHola) {
                if (nombre) {
                    // Si tiene nombre: 'Juan, Buenos días...' -> 'Hola Juan, Buenos días...'
                    mensajeFinal = mensajeFinal.replace(`${nombre}, `, `Hola ${nombre}, `);
                } else {
                    // Si no tiene nombre: 'Buenos días...' -> 'Hola, Buenos días...'
                    mensajeFinal = `Hola, ${mensajeFinal}`;
                }
            }
            
            // 4. Agrega los mensajes de modificador al final (Separados por un punto y espacio)
            let suffix = "";
            
            if (incluirDameMomento) {
                 // Nota: Uso 'dame un momento por favor' y quito la capitalización ya que va como sufijo
                suffix += " Dame un momento por favor."; 
            }

            if (incluirComoAyudar) {
                // Nota: Capitalizo la pregunta si no va precedida por otro texto
                // Si ya agregué "Dame un momento", no capitalizo el inicio.
                let pregunta = "¿Cómo puedo ayudarte?";
                if (suffix.length > 0) {
                    pregunta = "¿cómo puedo ayudarte?";
                }
                suffix += ` ${pregunta}`;
            }

            if (suffix.length > 0) {
                // Asegurarse de que el mensaje final termine con un punto para evitar dos puntos seguidos,
                // luego agregar el sufijo.
                if (!mensajeFinal.trim().endsWith('.') && !mensajeFinal.trim().endsWith('!') && !mensajeFinal.trim().endsWith('?')) {
                    mensajeFinal += ".";
                }
                mensajeFinal += suffix;
            }

            return mensajeFinal;
        }

        // Actualiza el contenido del mensaje mostrado
        function actualizarMensajeActual() {
            if (!mensajeActual) return;
            const mensajeBase = mensajes[mensajeActual];
            document.getElementById("messageBox").value = personalizarMensaje(mensajeBase);
        }

        // Función para mostrar la notificación de "Copiado"
        function mostrarNotificacionCopiado() {
            const notification = document.getElementById('copy-notification');
            notification.style.opacity = 1;
            setTimeout(() => {
                notification.style.opacity = 0;
            }, 2000); // Muestra por 2 segundos
        }

        // Función para copiar texto genérica
        function copiarTexto(elementId) {
            const box = document.getElementById(elementId);
            if (!box.value || box.value.includes('Ingresa los datos del cliente')) {
                return;
            }
            box.select();
            document.execCommand("copy");
            mostrarNotificacionCopiado(); // Llama a la nueva función de notificación
        }

        /* =======================================================
         * SECCIÓN DE AGENDAMIENTOS
         * ======================================================= */
        const horarios = {
            yeison: {
                '9am': 'https://us06web.zoom.us/j/86553506923',
                '11am': 'https://us06web.zoom.us/j/84015173788',
                '2pm': 'https://us06web.zoom.us/j/86502199583',
                '5pm': 'https://us06web.zoom.us/j/89901352812'
            },
            paola: {
                '8am': 'https://us06web.zoom.us/j/84560427915',
                '12pm': 'https://us06web.zoom.us/j/87186962523',
                '4pm': 'https://us06web.zoom.us/j/81938853734'
            }
        };

        let agenteSeleccionado = '';
        let linkSeleccionado = '';

        // Muestra los botones de hora del agente seleccionado
        function seleccionarAgente(agente) {
            agenteSeleccionado = agente;
            linkSeleccionado = ''; // Resetea el link al cambiar de agente

            // Resetea la clase 'active' en todos los botones de agente
            document.getElementById('btnYeison').classList.remove('active');
            document.getElementById('btnPaola').classList.remove('active');

            // Añade la clase 'active' al botón presionado
            document.getElementById(`btn${agente.charAt(0).toUpperCase() + agente.slice(1)}`).classList.add('active');

            const timesContainer = document.getElementById('agentTimes');
            timesContainer.innerHTML = ''; // Limpiar botones anteriores

            const agentHorarios = horarios[agente];

            if (Object.keys(agentHorarios).length > 0) {
                for (const hora in agentHorarios) {
                    const btn = document.createElement('button');
                    btn.className = 'msg-btn time-btn'; // Añadimos 'time-btn'
                    btn.textContent = hora;
                    // Pasamos la hora y el link para que la hora quede como ID único del botón
                    btn.onclick = (event) => seleccionarHora(agentHorarios[hora], event.target);
                    timesContainer.appendChild(btn);
                }
            } else {
                 timesContainer.innerHTML = '<p style="color: #ff5252; margin: 0;">Horarios no disponibles para este agente.</p>';
            }
            
            actualizarAgendamiento();
        }

        // Guarda el link de la hora seleccionada y resalta el botón
        function seleccionarHora(link, targetButton) {
            linkSeleccionado = link;
            
            // Remueve la clase 'active' de todos los botones de hora del contenedor
            const timeButtons = document.querySelectorAll('.agent-times .time-btn');
            timeButtons.forEach(btn => btn.classList.remove('active'));

            // Añade la clase 'active' al botón de hora presionado
            targetButton.classList.add('active');

            actualizarAgendamiento();
        }

        // Construye el mensaje final de agendamiento
        function actualizarAgendamiento() {
            const datosCliente = document.getElementById('clienteData').value.trim();
            const outputBox = document.getElementById('agendamientoOutput');

            // Lógica para actualizar el mensaje
            if (datosCliente && linkSeleccionado) {
                outputBox.value = `${datosCliente} - únete a la reunión aquí: ${linkSeleccionado}`;
            } else if (datosCliente && !linkSeleccionado && agenteSeleccionado) {
                outputBox.value = `Selecciona una hora para generar el enlace.`;
            } else {
                outputBox.value = 'Ingresa los datos del cliente y selecciona un agente y una hora.';
            }
        }
        
        // Inicializar
        document.addEventListener('DOMContentLoaded', () => {
             // Por defecto, selecciona Yeison al cargar
             seleccionarAgente('yeison');
             document.getElementById('agendamientoOutput').value = 'Ingresa los datos del cliente.';
             document.getElementById("messageBox").value = 'Selecciona un mensaje arriba...';
        });
    </script>
</body>
</html>